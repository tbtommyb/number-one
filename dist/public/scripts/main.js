$(document).ready(function(){"use strict";function a(a,b){$.ajax({url:"https://www.googleapis.com/youtube/v3/search",data:{part:"snippet",type:"video",videoEmbeddable:"true",maxResults:"1",key:"AIzaSyA5UichqO_WSK22RMjGqWhmz-GvRQK9Szg",q:a.artist+"+"+a.title},type:"GET",success:function(a){b(a.items[0].id.videoId)}})}function b(a){f?f.cueVideoById(a):c(a),$("body, html").animate({scrollTop:$("body").height()},1e3)}function c(a){var b=document.createElement("script");b.src="https://www.youtube.com/iframe_api";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c),window.onYouTubeIframeAPIReady=function(){f=new YT.Player("player",{height:"366",width:"640",videoId:a})}}function d(a){var b="string"==typeof a?$(a):a;return b.textfill({minFontPixels:4,maxFontPixels:40}),b}function e(){var a=$("#main").width()/12.5,b=$("#main").width()/2-$(".div-date").width()/2+2;$(".div-date").css({top:a+"px",left:b+"px"})}var f,g=$("#dateEntry"),h=$(".header-holder"),i=$(".record-holder"),j=$("#record");$("#date").combodate({minYear:1953,format:"YYYY-MM-DD",customClass:"date-form--input",errorClass:"is-error"}),$(window).on("load resize",function(){d(h),d(i),e()}),g.on("submit",function(c){if(c.preventDefault(),!$(".combodate").hasClass("is-error")){var e=$(this).serialize().split("=")[1];$.ajax("/api/records/"+e,{success:function(c){var e=c[0];j.html("<span>"+e.artist+": "+e.title+"</span>"),d(i),j.css({opacity:0,visibility:"visible"}).animate({opacity:1},"slow"),a(e,function(a){b(a)})},error:function(){j.html("<span>Failed to load data</span>").css({opacity:0,visibility:"visible"}).animate({opacity:1},"slow")}})}})});